
### General {{{
  # Use UTF-8 encoding
  set-option -gq utf8
  set-window-option -gq utf8 on
  # set-option scrollback history to 10000 (10k)
  set-option -g history-limit 10000
  # Visual notification of activity in other windows
  set-window-option -g monitor-activity on
  set-option -g visual-activity on
  # No automatic renaming of windows (from commands on execution)
  set-window-option -g automatic-rename on
  # set-option title, which is also showed at iTerm tab
  # #T      = standard window title (last command, see ~/.bash_profile)
  # #h      = short hostname
  # #S      = session name
  # #I      = tmux window index
  # #W      = tmux window name
  # Attempt to set the window title using xterm code if tmux detects using xterm
  set-option -g set-titles on
  set-option -g set-titles-string "#I:#W"

  # set-option the terminal color to 256color
  # set-option -g default-terminal "screen-256color"
  # set-option -ga terminal-overrides ',screen-256color:Tc'
  # set-option -as terminal-overrides ',screen*:sitm=\E[3m'
set-option -g default-terminal "xterm-256color"
  set-option -ga terminal-overrides ',xterm-256color:Tc'
  set-option -as terminal-overrides ',xterm*:sitm=\E[3m'
### }}}

### Key Bindings {{{
  # Key combination prefix is <C-a>, not <C-b>
  unbind-key C-b
  set-option -g prefix C-j
  # Use send-prefix to pass C-a through to application
  bind C-j send-prefix

  # Reload ~/.tmux.conf using PREFIX r
  bind r source-file ~/.tmux.conf # display "TMUX configuration is reloaded!"

  # Reduce the command delay time to something a bit shorter
  set-option -sg escape-time 0
  # Disallow multiple commands to be entered without pressing the prefix-key again
  set-option -sg repeat-time 0

  # Use vi-style key bindings in copy and choice modes
  set-window-option -g mode-keys vi
  # Use vi-style key bindings in the status line (command mode)
# Setup 'v' to begin selection as in Vim
  set-option -g status-keys vi
  tmux_version="`tmux -V | cut -d' ' -f2`"
  if-shell "[ $tmux_version -ge 2.4 ]" \
    "bind-key -T copy-mode-vi 'v' send -X begin-selection"
  if-shell "[ $tmux_version -lt 2.4 ]" \
    'bind-key -t vi-copy v begin-selection'
  if-shell "[ $tmux_version -ge 2.4 ]" \
    "bind-key -T copy-mode-vi 'y' send -X copy-selection"
  if-shell "[ $tmux_version -lt 2.4 ]" \
    'bind-key -t vi-copy y copy-selection'
  bind P paste-buffer
  # Map Vi movement keys as pane movement keys
  bind h select-pane -L
  bind j select-pane -D
  bind k select-pane -U
  bind l select-pane -R
  # Resize panes using PREFIX H, J, K, L
  bind H resize-pane -L 5
  bind J resize-pane -D 5
  bind K resize-pane -U 5
  bind L resize-pane -R 5

  # Open window with currrent path
  bind c new-window -c '#{pane_current_path}'
  # Use PREFIX | to split window horizontally and PREFIX - to split vertically
  bind | split-window -h -c '#{pane_current_path}'
  bind - split-window -v -c '#{pane_current_path}'

  # Make the current window the first window
  bind T swap-window -t 1
  bind -r "<" swap-window -d -t -1
  bind -r ">" swap-window -d -t +1

  bind-key j command-prompt -p "join pane from: "  "join-pane -h -s '%%'"

  # If enabled, request mouse input as UTF-8 on UTF-8 terminals
  set-option -gq mouse-utf8 on
  # If enabled, use mouse control in TMUX
  set-window-option -g mouse on
### }}}

### Appereance {{{
  # # Let window numbers be 1-indexed
  set-option -g base-index 1
  setw -g pane-base-index 1
  # # Automatically renumber window numbers on closing a pane (tmux >= 1.7)
  set-option -g renumber-windows on
  # # Enable focus events for terminal that support them
  set-option -g focus-events on
  # # set-option window notifications
  # set-window-option -g monitor-activity on
  # # Display a status line message when activity occurs in a window
  # set-option -g visual-activity on
  # # Display tmux messages for 2 seconds
  # set-option -g display-time 2000
  #
  # # Enable aggressive-resize that is super useful when using grouped sessions and multi-monitor
  set-window-option -g aggressive-resize on
  # # Status Bar on top
  set-option -g status-position top
  
  # Window List {{
      ## Window List
      # Center window list for clarity
      set-option -g status-justify left

      # Configure contents in window status
      set-window-option -g window-status-format "[#I/#{pane_current_command}]"
      # Set colors and attributes for the window status text
      set-window-option -g window-status-style fg=colour244,bg=default,dim

      # Configure contents in current window status
      set-window-option -g window-status-current-format "#I/#{pane_current_command}"
      # Set colors and attributes for the current window status text
      set-window-option -g window-status-current-style fg=colour254,bg=default,bold

      # Set colors and attributes for the status text of window which have an activity
      set-window-option -g window-status-activity-style fg=colour64,bg=default,bold
    # }
    
set -g status-right-length 150
#+--- Bars LEFT ---+
# Session name
set -g status-left "#[fg=black,bg=#41a6b5,bold] #S #[fg=blue,bg=default,nobold,noitalics,nounderscore]"
#+--- Windows ---+
# Focus
set -g window-status-current-format "#[fg=white,bg=#1F2335]   #I #W  #{?window_last_flag,,} "
# Unfocused
set -g window-status-format "#[fg=brightwhite,bg=#1a1b26,nobold,noitalics,nounderscore]   #I #W #F  "


#+--- Panes ---+
set -g pane-border-style "fg=#3b4261"
set -g pane-active-border-style "fg=#7aa2f7"

# Status bar background
set -g status-bg "#1a1b26"

#+--- Bars RIGHT ---+
set -g status-right "#[fg=#1F2335]#{prefix_highlight}#[fg=brightwhite,bg=#1F2335] #{cpu_percentage} #[fg=white,bg=#24283B] %a %Y-%m-%d #[]❬  %H:%M "
set -g window-status-separator ""


### Plugins {{{
  # List of plugins
  # Supports `github_username/repo` or full URL
  # Examples:
  # github_username/plugin_name
  # git@github.com/user/plugin
  # git@bitbucket.cmo/user/plugin
  set-option -g @plugin 'tmux-plugins/tpm'
  set-option -g @plugin 'tmux-plugins/tmux-cpu'
  set-option -g @plugin 'tmux-plugins/tmux-copycat'
  set-option -g @plugin 'tmux-plugins/tmux-open'
  set-option -g @plugin 'tmux-plugins/tmux-prefix-highlight'
  set-option -g @plugin 'tmux-plugins/tmux-sensible'

  ## Shortcuts of plugins
  # TPM
  # <prefix> + I: installs new plugins from GitHub or any other git repository
  # <prefix> + U: updates plugins
  # <prefix> + alt-u: remove/uninstall plugins not on the plugin list
  # Copycat
  # <prefix> + /: regex search
  # <prefix> + ctrl-f : simple file search
  # <prefix> + ctrl-g : jumping over git status files (used after `git status` command)
  # <prefix> + alt-h: jumping over SHA-1 hashes (used after `git log` command)
  # <prefix> + ctrl-u : url search (http, ftp and git urls)
  # <prefix> + ctrl-d : number search (mnemonic d, as digit)
  # <prefix> + alt-i : ip address search
  # n, N: jumps to the next/previous match
  # Enter: To copy a highlighted match (vi mode)
  # ctrl-w / alt-w: To copy a highlighted match (emacs mode)
  # <prefix> + ]: To paste (this is Tmux default paste)
  # Open
  # o: open a highlighted selection with the system default program (open for OS X)
  # ctrl-o: open a highlighted selection with the $EDITOR
  # Resurrect
  # <prefix> + ctrl-s: save
  # <prefix> + ctrl-r: restore
  
  ## plugin: yank {{
    set -g @yank_with_mouse on

  #}}
   # Initializes TMUX plugin manager.
  # Keep this line at the very bottom of tmux.conf
  run '~/.tmux/plugins/tpm/tpm'
### }}}

